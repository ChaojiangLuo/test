<html>
<head>
<title>UPNP Media Player</title>
<script src="jquery.js"></script>
<script src="xml2json.js"></script>
<script src="soapclient.js"></script>
<script src="upnp.js"></script>
<script>
  
function m_search(){
  var url = "http://172.23.176.2:9999/description.xml";
  var xhr = new XMLHttpRequest();
  xhr.open("POST", url, false);
  xhr.send();
  console.log(xhr.responseXML);
}

$(document).ready(function() {
  $('input:button').addClass("btnClass");
  // fillData();
  $('#btnGet').click(function() {
      fillData();
  });

  function fillData() {
    var url = "http://localhost:9999/description.xml";
    _this = this;
    $.get(url, function(xml) { 
      $(xml).find("service").each(function() {
        var service = {
            servicetype: $(this).find("servicetype").text(),
            serviceid: $(this).find("serviceid").text(),
            scpdurl: $(this).find("scpdurl").text(),
            controlurl: $(this).find("controlurl").text(),
            eventsuburl: $(this).find("eventsuburl").text(),
        };
        console.log(service);
      });

      var services = _this.description_.root.device.serviceList;
      for (var i = 0; i < services.lenght; i++) {
        switch(services[i].serviceId) {
          case "urn:upnp-org:serviceId:ContentDirectory":
            _this.cdService = service;
            breal;
          case "urn:upnp-org:serviceId:ConnectionManager":
            _this.cmService = service;
            break;
        }
      }
    });
  };
});

</script>
</head>
<body>
<p>Hello, world! Note that this text is not selectable.</p>
<div><button onclick="window.close()">Close</button></div>
<p><button onclick="m_search();">Send something via UDP to localhost:1337</button></p>
<p><button id="btnGet">getData</button></p>
<div id="stdData"></div>
</body>
</html>
